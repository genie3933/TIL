- 함수
- 숫자형 함수
- 문자형 함수
- 날짜형 함수

---

## 함수

- 자주 사용되는 연산을 정의해놓은 데이터베이스 객체 (재사용 목적이 크다)
- CASE ~ WHEN ~ END 로직을 매번 구현하는 것을 비효율적이기 때문에 함수로 구현한 후 필요할 때마다 호출해서 사용한다
- 함수는 반환값의 데이터 유형에 따라 크게 문자형, 숫자형, 날짜형으로 구분된다 (오라클의 빌트인 함수)

## 숫자형 함수

- 피연산자와 연산 결과가 모두 숫자인 함수
- 오라클에서 자주 쓰이는 숫자형 함수

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/313c5b33-c277-4bad-9b58-3db953d832cf/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/313c5b33-c277-4bad-9b58-3db953d832cf/Untitled.png)

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/5385ba54-183b-4325-925b-4b1e414ee556/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/5385ba54-183b-4325-925b-4b1e414ee556/Untitled.png)

출처: [http://www.gurubee.net/lecture/2372](http://www.gurubee.net/lecture/2372)

## 문자형 함수

- 피연산자가 문자형인 함수
- 반환결과는 문자형 혹은 숫자형이다
- 자주 쓰이는 문자형 함수의 종류는 아래와 같다

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/d9d5937e-87d4-4432-9b24-4dddeec55b82/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/d9d5937e-87d4-4432-9b24-4dddeec55b82/Untitled.png)

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/7d621ac1-cbbd-4c48-b344-522bf0a2cd0f/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/7d621ac1-cbbd-4c48-b344-522bf0a2cd0f/Untitled.png)

출처: [http://www.gurubee.net/lecture/2372](http://www.gurubee.net/lecture/2372)

- 추가

INITCAP(chr): chr의 첫 번째 문자를 대문자로 변환

LPAD(expr1, n, expr2) : expr1을 반환하는데 expr2를 (n-expr1 길이)만큼 왼쪽을 채워 반환

RPAD(expr1, n, expr2):  expr1을 반환하는데 expr2를 (n-expr1 길이)만큼 오른쪽을 채워 반환

```sql
# LPAD
SELECT
LPAD('SQL', 5, '*')
FROM DUAL;

# 출력결과
**SQL

# RPAD
SELECT
RPAD('SQL', 5, '*')
FROM DUAL;

# 출력결과
'SQL**'
```

LENGTHB(chr): chr 문자의 바이트 수 반환

TRIM(chr): chr의 양쪽 끝 공백을 제거한 결과를 반환

REPLACE(chr, serch_str, rep_str): chr에서 serch_str을 찾아 rep_str로 대체

INSTR(chr1, chr2, n1, n2):  chr1에서 chr2 문자 찾기. n1은 chr1에서 몇 번째 문자부터 찾을 것인지를 적용한다. n2는 chr2 문자를 찾을 때 몇 번째 위치를 반환할지를 나타낸다. n1, n2를 생략할 시 디폴트값은 1이다.

- 알아둬야 할 점

→ 한글은 한 글자당 3바이트

→ TRIM함수들은 '잘라내기' 함수라고 생각하면 된다

→ 분석시 많이 쓰이는 함수는 SUBSTR, LENGTH, REPLACE, INSTR등이다

→ SUBSTR 함수에서 마지막 매개변수가 없을 때는 시작 문자부터 뒤의 모든 문자를 가져온다

→ 문자형함수에 한글이 섞여있을 경우 그대로 출력된다

```sql
# 한글이 섞여있는 경우
SELECT INITCAP('홍gildong')
FROM DUAL;

# 출력결과 한글은 그대로
'홍Gildong'
```

→ INSTR 함수는 주로 문자확인용으로 많이 쓰인다

→ REPLACE는 공백 전체 제거 시 많이 사용된다

## 날짜형 함수

- 데이터 형이 DATE나 TIMESTAMP인 데이터를 대상으로 연산을 수행하는 함수
- 날짜형 함수 종류

→ SYSDATE: 오라클이 설치된 컴퓨터의 시스템 시간을 알려준다

→ MONTH_BETWEEN(날짜1, 날짜2): 날짜1과 날짜2 사이의 개월수를 구해준다

→ NEXT_DAY('기준일자', '찾을 요일'): 기준일자로부터 다음번 지정 요일이 몇일인지 구해준다

요일은 숫자로 입력해도 되는데, 순서는 일요일부터 1, 월요일은 2, .... 토요일 7 이런식으로 진행된다

→ LAST_DAY(날짜): 해당 월의 마지막 날짜를 알려준다

→ ADD_MONTHS(날짜, 개월수): 해당 날짜로부터 지정한 개월 수 뒤의 날짜를 알려준다

→ ROUND(날짜, 포맷): 날짜를 반올림한다

→ TRUNC(날짜, 포맷): 날짜를 버림한다

→ ROUND, TRUNC 사용시 포맷은 YYYY, MM, DD, HH, HH24, MI 등을 사용할 수 있고 포맷 생략시 디폴트는 DD로 지정된다

- 알아둬야 할 점

→ 날짜에 개월 수를 더하거나 빼려면 ADD_MONTHS 사용

→ 날짜에 일(day)을 더하거나 빼려면 연산자 (+, -) 사용
